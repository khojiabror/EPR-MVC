@model EPR_MVC.Models.MachinesViewModel
<html>
<head>
   
</head>
<body class="vertical-layout vertical-menu-modern 2-columns  navbar-sticky footer-static  " data-open="click" data-menu="vertical-menu-modern" data-col="2-columns">

    @if (Model != null)
    {
        <!-- BEGIN: Content-->
        <div class="app-content content">
            <div class="content-overlay"></div>
            <div class="content-wrapper">
                <div class="content-header row">
                    <div class="content-header-left col-12 mb-2 mt-1">
                        <div class="row breadcrumbs-top">
                            <div class="col-12">
                                <h5 class="content-header-title float-left pr-1 mb-0">Ma'lumotlar bazasi</h5>
                                <div class="breadcrumb-wrapper col-12">
                                    <ol class="breadcrumb p-0 mb-0">
                                        <li class="breadcrumb-item">
                                            <a href="Index"><i class="bx bx-home-alt"></i></a>
                                        </li>
                                        <li class="breadcrumb-item active">
                                            Uskunalar
                                        </li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="content-body">
                    <div class="row">

                    </div>
                    <section id="table-success">
                        <ul class="list-inline mb-0">
                            <li class="ml-2"><button class="btn btn-primary" data-toggle="modal" data-target="#full-scrn" data-repeater-create type="button"><i class="bx bx-plus"></i>Qo'shish</button></li>
                            @*<li class="ml-2"><button class="btn btn-primary" data-toggle="modal" data-target="#full-scrn" data-repeater-create type="button"><i class="bx bx-edit"></i> O'zgartirish</button></li>
                                <li class="ml-2"><button class="btn btn-danger" data-toggle="modal" data-target="#full-scrn" data-repeater-delete type="button"> <i class="bx bx-x"></i>O'chirish</button></li>*@
                        </ul>
                        <hr />
                        <div class="card">
                            <!-- datatable start -->
                            <div class="table-responsive">
                                <table id="table-extended-success" class="table mb-0">
                                    <thead class="thead-dark">
                                        <tr>
                                            <th>Nomi</th>
                                            <th>Batafsil</th>
                                            <th>Partnumber</th>
                                            <th>Yaroqlilik muddati</th>
                                            <th>Ishga tushgan sana</th>
                                            <th>Uskuna turi</th>
                                            <th>Status</th>
                                            <th>Ishlab chiqaruvchi</th>
                                            <th>UzAuto korxonasi</th>
                                            <th>Amal</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var machine in Model.machineList)
                                        {
                                            <tr>
                                                <td>@machine.Name </td>
                                                <td>@machine.Description </td>
                                                <td>@machine.PartNumber </td>
                                                <td>@machine.Lifespan </td>
                                                <td class="text-bold-300">@machine.InstalledDate </td>
                                                <td>@machine.MACHINETYPE.Name </td>
                                                @if (machine.IsActive == true)
                                                {
                                                    <td class="text-success">Faoliyatda</td>
                                                }
                                                <td>@machine.MANUFACTURER.Name</td>
                                                <td>@machine.UZAUTOSUPPLIER.Name </td>
                                                <td>
                                                    <div class="dropdown">
                                                        <span class="bx bx-dots-vertical-rounded font-medium-3 dropdown-toggle nav-hide-arrow cursor-pointer" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" role="menu"></span>
                                                        <div class="dropdown-menu dropdown-menu-right">
                                                            <a class="dropdown-item" href="#"><i class="bx bx-edit-alt mr-1"></i> o'zgartirish</a>
                                                            <a class="dropdown-item" href="#"><i class="bx bx-trash mr-1"></i> o'chirish</a>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                        }
                                        <tr></tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="modal fade text-left modal-borderless" id="full-scrn" tabindex="-1" role="dialog" aria-labelledby="myModalLabel20" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-scrollable" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h4 class="modal-title" id="myModalLabel33">Material qo'shish </h4>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <i class="bx bx-x"></i>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <form id="modalForm">
                                                <label>Nomi: </label>
                                                @Html.TextBoxFor(model => model.Name, new { @class = "form-control", @placeholder = "Nomi" })
                                                <label>Batafsil: </label>
                                                @Html.TextBoxFor(model => model.Description, new { @class = "form-control", @placeholder = "Batafsil" })
                                                <label>PartNumber: </label>
                                                @Html.TextBoxFor(model => model.PartNumber, new { @class = "form-control", @placeholder = "PartNumber" })
                                                <label>Yaroqlilik muddati: </label>
                                                @Html.TextBoxFor(model => model.Lifespan, new { @class = "form-control", @placeholder = "Yaroqlilik muddati" })
                                                <label>Ishga tushgan sana: </label>
                                                @Html.TextBoxFor(model => model.InstalledDate, new { @class = "form-control", @placeholder = "Ishga tushgan sana" })
                                                <label>Turi: </label>
                                                @Html.DropDownListFor(model => model.TypeID, ViewBag.TypeList as SelectList, "---tanlang---", new { @class = "form-control", @placeholder = "Turi" })
                                                <label>Oxirgi status: </label>
                                                @Html.CheckBoxFor(model => model.Status, new { @class = "form-control", @placeholder = "PartNumber" })
                                                <label>Ishlab chiqaruvchi: </label>
                                                @Html.DropDownListFor(model => model.ManufacturerID, ViewBag.ManufacturerList as SelectList, "---tanlang---", new { @class = "form-control", @placeholder = "Ishlab chiqaruvchi" })
                                                <label>UzAuto Korxonasi: </label>
                                                @Html.DropDownListFor(model => model.UzAutoSupplierID, ViewBag.UzAutoSupplierList as SelectList, "---tanlang---", new { @class = "form-control", @placeholder = "Mahalliy korxona" })
                                            </form>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-light-secondary" data-dismiss="modal" id="btnCancel">
                                                <i class="bx bx-x d-block d-sm-none"></i>
                                                <span class="d-none d-sm-block">Chiqish</span>
                                            </button>
                                            <input type="reset" class="btn btn-primary ml-1" data-dismiss="modal" id="btnSubmit" value="Qo'shish" />
                                            <i class="bx bx-check d-block d-sm-none"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- datatable ends -->
                        </div>
                    </section>
                </div>
            </div>
        </div>
        <script src="~/Scripts/Fresta/app-assets/js/core/libraries/jquery.min.js"></script>
        <script>
            $(document).ready(function () {
                
                $("#btnSubmit").click(function () {
                    var formData = $("#modalForm").serialize();

                    $.ajax({
                        type: "POST",
                        url: "/Database/MachinesInsert",
                        data: formData,
                        success: function () {
                            $("#full-scrn").modal("hide");
                        }
                    })


                })
                $("#btnCancel").click(function () {
                    $("#full-scrn").modal("hide");
                })
            })
        </script>
    }
</body>
</html>